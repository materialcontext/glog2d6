{{!-- Spells Tab --}}
<div class="tab" data-group="primary" data-tab="spells">
    <div class="spells-section">
        <div class="spells-header flex flex-between mb-10 p-10 section">
            <div class="spells-info text-bold">
                Magic Dice (MD): {{system.magicDiceCurrent}}/{{system.magicDiceMax}} | Spell Slots:
                {{system.spellSlots}}
            </div>
            {{#if editMode}}
            <div class="flex">
                <a class="btn btn-secondary p-6 text-small flex flex-center flex-gap-4" data-type="spell"
                    title="Create Spell">
                    <i class="fas fa-magic"></i> Spell
                </a>
            </div>
            {{/if}}
        </div>

        <div class="gear-list section">
            {{#each actor.items as |item id|}}
            {{#if (eq item.type "spell")}}
            <div class="gear-item" data-item-id="{{item.id}}">
                {{!-- Empty equipped column for alignment --}}
                <div class="gear-name">
                    <div class="item-image section p-2 flex flex-center">
                        <img src="{{item.img}}" title="{{item.name}}" width="24" height="24" />
                    </div>
                    <h4 class="text-small">{{item.name}}</h4>
                </div>

                <div class="gear-action">
                    {{#unless ../editMode}}
                    <button type="button"
                        class="spell-cast-btn btn btn-success p-4 text-small flex flex-center flex-gap-2"
                        data-item-id="{{item.id}}" title="Cast {{item.name}}">
                        <i class="fas fa-magic"></i>
                    </button>
                    {{/unless}}
                </div>

                <div class="gear-details">
                    <span class="gear-detail">spell</span>
                </div>

                <div class="gear-slots text-small text-muted">
                    {{!-- Show range, duration, or components if available --}}
                    {{#if item.system.range}}
                    <div class="spell-info">Range: {{item.system.range}}</div>
                    {{/if}}
                    {{#if item.system.duration}}
                    <div class="spell-info">Duration: {{item.system.duration}}</div>
                    {{/if}}
                </div>

                {{#if ../editMode}}
                <div class="gear-controls">
                    <a class="btn btn-secondary p-2 text-small item-control item-edit" title="Edit Spell">
                        <i class="fas fa-edit"></i>
                    </a>
                    <a class="btn btn-danger p-2 text-small item-control item-delete" title="Delete Spell">
                        <i class="fas fa-trash"></i>
                    </a>
                </div>
                {{/if}}
            </div>
            {{/if}}
            {{else}}
            <div class="empty-section text-center p-10 section">
                <div class="empty-icon text-muted mb-10">
                    <i class="fas fa-magic" style="font-size: 32px;"></i>
                </div>
                <p class="text-muted mb-8">No spells known yet.</p>
                {{#if editMode}}
                <p class="text-muted">Click "Spell" above to add your first spell.</p>
                {{/if}}
            </div>
            {{/each}}
        </div>
    </div>
</div>
