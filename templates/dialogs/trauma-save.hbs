{{!-- templates/dialogs/trauma-save.hbs --}}
<form autocomplete="off">
    <div class="form-group flex flex-col flex-gap-2 mb-15">
        <label class="text-small text-bold text-upper text-muted">Excess Damage Taken</label>
        <input type="number" name="excessDamage" value="1" min="1" max="20" class="input text-center" autofocus />
        <small class="text-small text-muted">This determines which wound you'll receive if you fail</small>
    </div>

    <div class="section p-10 mb-15">
        <h4 class="text-small text-bold text-upper text-primary mb-8">Save Modifiers</h4>
        <div class="grid-2 flex-gap-8">
            <div class="flex flex-between">
                <span class="text-small text-muted">Constitution:</span>
                <span class="text-bold">{{numberFormat conMod decimals=0 sign=true}}</span>
            </div>

            {{#if traumaBonuses}}
            <div class="flex flex-between">
                <span class="text-small text-muted">Trauma Bonuses:</span>
                <span class="text-bold text-success">+{{traumaBonuses}}</span>
            </div>
            {{/if}}
        </div>

        <div class="form-group flex flex-col flex-gap-2 mt-8">
            <label class="text-small text-bold text-upper text-muted">Additional Bonus/Penalty</label>
            <input type="number" name="customBonus" value="0" class="input text-center" />
            <small class="text-small text-muted">Circumstantial modifiers from GM</small>
        </div>

        <div class="mt-8 p-8 section text-center"
            style="border: 2px solid var(--primary); background: linear-gradient(135deg, var(--bg-light) 0%, white 100%);">
            <div class="text-bold">Total Modifier: {{numberFormat totalBonus decimals=0 sign=true}}</div>
            <small class="text-muted">Target: 7 or higher to succeed</small>
        </div>
    </div>

    <div class="section p-10 mb-15" style="background: var(--bg-section); border-left: 4px solid var(--danger);">
        <h4 class="text-small text-bold text-upper text-primary mb-8">Potential Wounds</h4>
        <div class="text-small text-muted">
            {{#each woundsPreview as |wound|}}
            <div class="p-2"><strong>{{wound.damage}} damage:</strong> {{wound.name}} ({{wound.shortDesc}})</div>
            {{/each}}
        </div>
    </div>

    <div class="flex flex-center">
        <button type="submit" class="btn btn-primary p-8">
            <i class="fas fa-dice"></i> Roll Trauma Save
        </button>
    </div>
</form>
